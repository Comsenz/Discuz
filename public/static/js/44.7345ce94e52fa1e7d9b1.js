(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{HkBF:function(e,a,r){"use strict";var t=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"searchBox"},[r("comHeader",{attrs:{title:"关注我的人"}}),e._v(" "),r("div",{staticClass:"content"},[r("form",{attrs:{action:"/"}},[r("van-search",{staticClass:"searchCon",attrs:{placeholder:"搜索用户和主题",background:"#f8f8f8","show-action":""},on:{input:e.onSearch,cancel:e.onCancel},model:{value:e.searchVal,callback:function(a){e.searchVal=a},expression:"searchVal"}})],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.searchUserList.length>0,expression:"searchUserList.length > 0"}],staticClass:"searchRes"},[r("h2",{staticClass:"resultTit"},[e._v("用户")]),e._v(" "),e._l(e.searchUserList,(function(a,t){return r("div",{key:t,staticClass:"resUser",on:{click:function(r){return e.jumpPerDet(a._data.id)}}},[a._data.avatarUrl?r("img",{staticClass:"resUserHead",attrs:{src:a._data.avatarUrl},on:{click:function(r){return e.jumpPerDet(a._data.id)}}}):r("img",{staticClass:"resUserHead",attrs:{src:e.appConfig.staticBaseUrl+"/images/noavatar.gif"},on:{click:function(r){return e.jumpPerDet(a._data.id)}}}),e._v(" "),r("div",{staticClass:"resUserDet"},[r("span",{staticClass:"resUserName",domProps:{innerHTML:e._s(a._data.username.replace(e.searchVal,"<i>"+e.searchVal+"</i>"))}}),e._v(" "),r("span",{staticClass:"userRole"},[e._v(e._s(a.groups[0]&&a.groups[0]._data.name))])])])})),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.userLoadMoreStatus,expression:"userLoadMoreStatus"}],staticClass:"searchMore",on:{click:e.handleLoadMoreUser}},[r("i",{staticClass:"icon iconfont icon-search"}),e._v("\n        搜索更多用户\n      ")])],2)])],1)},s=[];r.d(a,"a",(function(){return t})),r.d(a,"b",(function(){return s}))},KQe3:function(e,a,r){"use strict";var t=r("c2kH");r.n(t).a},MsNf:function(e,a,r){"use strict";r.r(a);var t=r("HkBF"),s=r("xZDA");for(var n in s)"default"!==n&&function(e){r.d(a,e,(function(){return s[e]}))}(n);r("KQe3");var u=r("KHd+"),i=Object(u.a)(s.default,t.a,t.b,!1,null,"0d97f5c2",null);a.default=i.exports},N960:function(e,a,r){},Vn0u:function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=n(r("14Xm")),s=n(r("D3Ub"));n(r("VVfg"));function n(e){return e&&e.__esModule?e:{default:e}}a.default={data:function(){return{searchVal:"",userParams:{"filter[username]":"","filter[group_id]":[],"page[limit]":5,"page[number]":1,sort:"createdAt",include:"groups"},themeParamd:{include:["user","firstPost"],"filter[q]":"","filter[isDeleted]":"no","page[limit]":5,"page[number]":1},firstComeIn:!0,searchUserList:[],searchThemeList:[],userLoadMoreStatus:!1,themeLoadMoreStatus:!1,userLoadMorePageChange:!1,themeLoadMorePageChange:!1,userLoading:!1,themeLoading:!1,timerSearch:null,searchMaxSum:3}},methods:{onSearch:function(e){var a=this;if(clearTimeout(this.timerSearch),this.searchVal=e,""===this.searchVal)return this.searchUserList=[],void(this.searchThemeList=[]);this.timerSearch=setTimeout((function(){a.firstComeIn=!1,a.userParams["filter[username]"]="*"+a.searchVal+"*",a.userParams["page[number]"]=1,a.handleSearchUser(!0),a.themeParamd["filter[q]"]=a.searchVal,a.themeParamd["page[number]"]=1,a.handleSearchTheme(!0)}),200)},onCancel:function(){this.$router.push({path:"/"})},handleSearchUser:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,s.default)(t.default.mark((function r(){var s;return t.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a&&(e.searchUserList=[]),!e.userLoading){r.next=3;break}return r.abrupt("return");case 3:return e.userLoading=!0,r.prev=4,s=e.userParams["page[number]"],r.next=8,e.appFetch({url:"users",methods:"get",data:e.userParams}).then((function(a){e.userLoadMoreStatus=a.readdata.length>e.searchMaxSum,e.searchUserList=a.readdata.splice(0,3)})).catch((function(a){e.userLoadMorePageChange&&e.userParams["page[number]"]>1&&(e.userParams["page[number]"]=s-1)}));case 8:return r.prev=8,e.userLoadMorePageChange=!1,e.userLoading=!1,r.finish(8);case 12:case"end":return r.stop()}}),r,e,[[4,,8,12]])})))()},handleLoadMoreUser:function(){this.$router.push({path:"/circle-members",query:{searchWord:this.searchVal}})},handleSearchTheme:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,s.default)(t.default.mark((function r(){var s;return t.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a&&(e.searchThemeList=[]),!e.themeLoading){r.next=3;break}return r.abrupt("return");case 3:return e.themeLoading=!0,r.prev=4,s=e.themeParamd["page[number]"],r.next=8,e.appFetch({url:"searchThreads",method:"get",data:e.themeParamd}).then((function(a){console.log(a,"主题搜索页面"),e.themeLoadMoreStatus=a.readdata.length>e.searchMaxSum,e.searchThemeList=a.readdata.splice(0,3)})).catch((function(a){e.themeLoadMorePageChange&&e.themeParamd["page[number]"]>1&&(e.themeParamd["page[number]"]=s-1)}));case 8:return r.prev=8,e.themeLoadMorePageChange=!1,e.themeLoading=!1,r.finish(8);case 12:case"end":return r.stop()}}),r,e,[[4,,8,12]])})))()},handleLoadMoreTheme:function(){this.$router.push({path:"/theme-search",query:{searchWord:this.searchVal}})},jumpPerDet:function(e){this.$router.push({path:"/home-page/"+e})},jumpDetails:function(e){this.$router.push({path:"/details/"+e})}},mounted:function(){},beforeRouteLeave:function(e,a,r){r()}}},aCL2:function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=u(r("QbLZ")),s=u(r("JZuw")),n=u(r("Vn0u"));function u(e){return e&&e.__esModule?e:{default:e}}r("iUmJ"),r("N960"),r("p+Ry"),a.default=(0,t.default)({name:"careMeView",components:{comHeader:s.default}},n.default)},c2kH:function(e,a,r){},"p+Ry":function(e,a,r){},xZDA:function(e,a,r){"use strict";r.r(a);var t=r("aCL2"),s=r.n(t);for(var n in t)"default"!==n&&function(e){r.d(a,e,(function(){return t[e]}))}(n);a.default=s.a}}]);