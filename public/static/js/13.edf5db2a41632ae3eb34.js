(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"4U6O":function(t,e,a){"use strict";var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-box"},[e("el-pagination",{attrs:{"current-page":this.currentPags,"page-size":this.pageSize,layout:"total, prev, pager, next,jumper",total:this.total},on:{"current-change":this.handleCurrentChange}})],1)},i=[];a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}))},"4gYi":function(t,e,a){"use strict";a.r(e);var n=a("ji+i"),i=a("gxDo");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);var l=a("KHd+"),s=Object(l.a)(i.default,n.a,n.b,!1,null,null,null);e.default=s.exports},"6Akm":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a("CmEe"),e.default={name:"card"}},"9JPH":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"withdrawal-application-box"},[a("div",{staticClass:"withdrawal-application__search-box"},[a("div",{staticClass:"withdrawal-application__search-condition"},[a("span",{staticClass:"withdrawal-application__search-condition__title"},[t._v("流水号：")]),t._v(" "),a("el-input",{attrs:{clearable:""},model:{value:t.cashSn,callback:function(e){t.cashSn=e},expression:"cashSn"}})],1),t._v(" "),a("div",{staticClass:"withdrawal-application__search-condition"},[a("span",{staticClass:"withdrawal-application__search-condition__title"},[t._v("申请时间：")]),t._v(" "),a("el-date-picker",{attrs:{clearable:"",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.applicationTime,callback:function(e){t.applicationTime=e},expression:"applicationTime"}})],1),t._v(" "),a("div",{staticClass:"withdrawal-application__search-condition"},[a("span",{staticClass:"withdrawal-application__search-condition__title"},[t._v("操作用户：")]),t._v(" "),a("el-input",{attrs:{clearable:""},model:{value:t.operationUser,callback:function(e){t.operationUser=e},expression:"operationUser"}})],1),t._v(" "),a("div",{staticClass:"withdrawal-application__search-condition"},[a("span",{staticClass:"withdrawal-application__search-condition__title"},[t._v("状态：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.statusSelect,callback:function(e){t.statusSelect=e},expression:"statusSelect"}},t._l(t.statusOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),a("div",{staticClass:"withdrawal-application__search-condition"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.searchClick}},[t._v("搜索")])],1)]),t._v(" "),a("div",{staticClass:"withdrawal-application-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"_data.cash_sn",label:"流水号","min-width":"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user._data.username",label:"操作用户",width:"110"}}),t._v(" "),a("el-table-column",{attrs:{prop:"_data.cash_apply_amount",label:"提现金额（元）",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"_data.created_at",label:"申请时间","min-width":"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.formatDate(e.row._data.created_at)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.cashStatus(e.row._data.cash_status,e.row._data.remark)))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row._data.cash_status?a("el-popover",{ref:"popover-"+e.$index,attrs:{width:"100",placement:"top"}},[a("p",[t._v("确定通过该提现吗？")]),t._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"10PX 0 0 0"}},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){t.noReviewClick(e.row._data.id),e._self.$refs["popover-"+e.$index].doClose()}}},[t._v("\n                不通过\n              ")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.reviewClick(e.row._data.id),e._self.$refs["popover-"+e.$index].doClose()}}},[t._v("通过")])],1),t._v(" "),1===e.row._data.cash_status?a("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[t._v("审核")]):t._e()],1):t._e()]}}])})],1),t._v(" "),t.pageCount>1?a("Page",{attrs:{"current-page":t.currentPaga,"page-size":10,total:t.total},on:{"current-change":t.handleCurrentChange}}):t._e()],1)])},i=[];a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}))},CmEe:function(t,e,a){},MTZ4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(a("QbLZ"));a("twg7");var i=r(a("xlY0"));function r(t){return t&&t.__esModule?t:{default:t}}e.default=(0,n.default)({name:"page"},i.default)},N3Nb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(a("QbLZ"));a("rLWY");var i=r(a("khy5"));function r(t){return t&&t.__esModule?t:{default:t}}e.default=(0,n.default)({name:"withdrawal-application-view"},i.default)},ethY:function(t,e,a){"use strict";a.r(e);var n=a("N3Nb"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e.default=i.a},gxDo:function(t,e,a){"use strict";a.r(e);var n=a("6Akm"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e.default=i.a},"ji+i":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-box"},[t.$attrs.header?a("div",{staticClass:"card-box__header",class:t.$slots.default?"":"not-main"},[a("header",{staticClass:"card-title",class:t.$attrs.intercept?"card-intercept-title":""},[t._v(t._s(t.$attrs.header))]),t._v(" "),t._t("header")],2):t._e(),t._v(" "),a("main",{staticClass:"card-box__main"},[t._t("default")],2)])},i=[];a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}))},khy5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(a("4gYi")),i=s(a("wd/R")),r=s(a("rWG0")),l=s(a("VVfg"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{tableData:[],cashSn:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},applicationTime:["",""],operationUser:"",statusOptions:[{value:"1",label:"待审核"},{value:"2",label:"审核通过"},{value:"3",label:"审核不通过"},{value:"4",label:"待打款"},{value:"5",label:"已打款"},{value:"6",label:"打款失败"}],statusSelect:"1",visible:!1,total:0,pageCount:0,currentPaga:1}},methods:{cashStatus:function(t,e){switch(t){case 1:return"待审核";case 2:return"审核通过";case 3:return"审核不通过，原因："+e;case 4:return"待打款";case 5:return"已打款";case 6:return"打款失败";default:return console.log("获取状态失败，请刷新页面！"),"未知状态"}},noReviewClick:function(t){var e=this,a={id:[]};this.$MessageBox.prompt("请输入不通过理由","提示",{confirmButtonText:"提交",cancelButtonText:"取消",inputPlaceholder:"请输入不通过理由"}).then((function(n){a.id.push(t),a.status=3,a.remark=n.value,e.postReview(a)})).catch((function(t){console.log(t)}))},reviewClick:function(t){var e={id:[]};e.id.push(t),e.status=2,this.postReview(e)},searchClick:function(){null==this.applicationTime?this.applicationTime=["",""]:""!==this.applicationTime[0]&&""!==this.applicationTime[1]&&(this.applicationTime[0]=this.applicationTime[0]+"-00-00-00",this.applicationTime[1]=this.applicationTime[1]+"-24-00-00"),this.getReflectList()},handleCurrentChange:function(t){console.log(t),this.currentPaga=t,this.getReflectList()},formatDate:function(t){return(0,i.default)(t).format("YYYY-MM-DD HH:mm")},getReflectList:function(){var t=this;this.appFetch({url:"reflect",method:"get",data:{include:["user","userWallet"],"filter[cash_status]":this.statusSelect,"page[number]":this.currentPaga,"page[size]":10,"filter[cash_sn]":this.cashSn,"filter[username]":this.operationUser,"filter[start_time]":this.applicationTime[0],"filter[end_time]":this.applicationTime[1]}}).then((function(e){console.log(e),t.tableData=[],t.tableData=e.readdata,t.total=e.meta.total,t.pageCount=e.meta.pageCount})).catch((function(t){console.log(t)}))},postReview:function(t){var e=this;this.appFetch({url:"review",method:"post",standard:!1,data:{ids:t.id,cash_status:t.status,remark:t.remark}}).then((function(a){console.log(a),"success"===a.data.result[t.id]?(e.getReflectList(),e.$message({message:"提交通过！",type:"success"})):"failure"===a.data.result[t.id]?e.$message.error("提交错误！请重新提交"):e.$message.error("未知错误，请刷新页面后重新提交")})).catch((function(t){console.log(t)}))}},created:function(){this.currentPaga=Number(l.default.getLItem("currentPag"))||1,this.getReflectList(Number(l.default.getLItem("currentPag"))||1)},components:{Card:n.default,Page:r.default}}},lxGk:function(t,e,a){"use strict";a.r(e);var n=a("MTZ4"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e.default=i.a},rLWY:function(t,e,a){},rWG0:function(t,e,a){"use strict";a.r(e);var n=a("4U6O"),i=a("lxGk");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);var l=a("KHd+"),s=Object(l.a)(i.default,n.a,n.b,!1,null,null,null);e.default=s.exports},twg7:function(t,e,a){},vxv5:function(t,e,a){"use strict";a.r(e);var n=a("9JPH"),i=a("ethY");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);var l=a("KHd+"),s=Object(l.a)(i.default,n.a,n.b,!1,null,null,null);e.default=s.exports},xlY0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,i=a("VVfg"),r=(n=i)&&n.__esModule?n:{default:n};e.default={data:function(){return{currentPags:this.currentPage}},props:{total:Number,pageSize:{type:Number,default:10},currentPage:{type:Number,default:1}},methods:{handleCurrentChange:function(t){r.default.setLItem("currentPag",t),this.$emit("current-change",t)}},beforeUpdate:function(){this.currentPags=Number(r.default.getLItem("currentPag"))||1,r.default.setLItem("currentPag",this.currentPags)},beforeDestroy:function(){r.default.setLItem("currentPag",1)},created:function(){this.currentPags=Number(r.default.getLItem("currentPag"))||1}}}}]);