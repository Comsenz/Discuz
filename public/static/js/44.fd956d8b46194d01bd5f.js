(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{MsNf:function(e,a,r){"use strict";r.r(a);var t=r("RZvB"),s=r("xZDA");for(var n in s)"default"!==n&&function(e){r.d(a,e,(function(){return s[e]}))}(n);r("wvGF");var o=r("KHd+"),u=Object(o.a)(s.default,t.a,t.b,!1,null,"b429d900",null);a.default=u.exports},N960:function(e,a,r){},RZvB:function(e,a,r){"use strict";var t=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",{staticClass:"searchBox"},[r("comHeader",{attrs:{title:"关注我的人"}}),e._v(" "),r("div",{staticClass:"content"},[r("form",{attrs:{action:"/"}},[r("van-search",{staticClass:"searchCon",attrs:{placeholder:"搜索用户和主题",background:"#f8f8f8","show-action":""},on:{input:e.onSearch,cancel:e.onCancel},model:{value:e.searchVal,callback:function(a){e.searchVal=a},expression:"searchVal"}})],1),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.searchUserList.length>0,expression:"searchUserList.length > 0"}],staticClass:"searchRes"},e._l(e.searchUserList,(function(a,t){return r("div",{key:t,staticClass:"resUser"},[a.fromUser._data.avatarUrl?r("img",{staticClass:"resUserHead",attrs:{src:a.fromUser._data.avatarUrl},on:{click:function(r){return e.jumpPerDet(a.fromUser._data.id)}}}):r("img",{staticClass:"resUserHead",attrs:{src:e.appConfig.staticBaseUrl+"/images/noavatar.gif"},on:{click:function(r){return e.jumpPerDet(a.fromUser._data.id)}}}),e._v(" "),r("div",{staticClass:"resUserDet"},[r("span",{staticClass:"resUserName",domProps:{innerHTML:e._s(a.fromUser._data.username.replace(e.searchVal,"<i>"+e.searchVal+"</i>"))}}),e._v(" "),"0"==a._data.is_mutual?r("a",{staticClass:"followHe",attrs:{href:"javascript:;"},on:{click:function(r){return e.followSwitch(a._data.is_mutual,a.fromUser._data.id,t)}}},[e._v("关注TA")]):r("a",{staticClass:"alreadFollow",attrs:{href:"javascript:;"},on:{click:function(r){return e.followSwitch(a._data.is_mutual,a.fromUser._data.id,t)}}},[e._v("相互关注")])])])})),0)])],1)},s=[];r.d(a,"a",(function(){return t})),r.d(a,"b",(function(){return s}))},SF84:function(e,a,r){},Vn0u:function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=o(r("EJiy")),s=o(r("14Xm")),n=o(r("D3Ub"));o(r("VVfg"));function o(e){return e&&e.__esModule?e:{default:e}}a.default={data:function(){return{searchVal:"",userParams:{"filter[type]":"2","page[limit]":20,"page[number]":1,include:"fromUser"},firstComeIn:!0,searchUserList:[],searchThemeList:[],userLoadMoreStatus:!1,userLoadMorePageChange:!1,userLoading:!1,themeLoading:!1,timerSearch:null,searchMaxSum:3}},created:function(){this.handleSearchUser();var e="";this.$route.query&&this.$route.query.searchWord&&(e=this.$route.query.searchWord),this.onSearch(e)},methods:{onSearch:function(e){var a=this;clearTimeout(this.timerSearch),this.searchVal=e,console.log(this.searchVal),this.timerSearch=setTimeout((function(){a.firstComeIn=!1,a.userParams["filter[username]"]=a.searchVal,a.userParams["page[number]"]=1,a.handleSearchUser(!0)}),200)},onCancel:function(){this.$router.push({path:"/"})},handleSearchUser:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,n.default)(s.default.mark((function r(){var t;return s.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a&&(e.searchUserList=[]),!e.userLoading){r.next=3;break}return r.abrupt("return");case 3:return e.userLoading=!0,r.prev=4,t=e.userParams["page[number]"],r.next=8,e.appFetch({url:"follow",methods:"get",data:e.userParams}).then((function(a){console.log(a,"dadadada"),e.userLoadMoreStatus=a.readdata.length>e.searchMaxSum,e.searchUserList=a.readdata})).catch((function(a){e.userLoadMorePageChange&&e.userParams["page[number]"]>1&&(e.userParams["page[number]"]=t-1)}));case 8:return r.prev=8,e.userLoadMorePageChange=!1,e.userLoading=!1,r.finish(8);case 12:case"end":return r.stop()}}),r,e,[[4,,8,12]])})))()},followSwitch:function(e,a,r){console.log("参数",void 0===e?"undefined":(0,t.default)(e),e);var s=new Object,n="";"0"==e?(s.to_user_id=a,n="post"):"1"==e&&(s.to_user_id=a,n="delete"),this.followRequest(n,s,e,r)},followRequest:function(e,a,r,t){var s=this;this.appFetch({url:"follow",method:e,data:{data:{type:"user_follow",attributes:a}}}).then((function(a){if(a.errors)throw s.$toast.fail(a.errors[0].code),new Error(a.error);"delete"==e?s.searchUserList[t]._data.is_mutual="0":(console.log("post"),s.searchUserList[t]._data.is_mutual="1")}))},jumpPerDet:function(e){this.$router.push({path:"/home-page/"+e})}},mounted:function(){},beforeRouteLeave:function(e,a,r){r()}}},aCL2:function(e,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=o(r("QbLZ")),s=o(r("JZuw")),n=o(r("Vn0u"));function o(e){return e&&e.__esModule?e:{default:e}}r("iUmJ"),r("N960"),r("p+Ry"),a.default=(0,t.default)({name:"careMeView",components:{comHeader:s.default}},n.default)},"p+Ry":function(e,a,r){},wvGF:function(e,a,r){"use strict";var t=r("SF84");r.n(t).a},xZDA:function(e,a,r){"use strict";r.r(a);var t=r("aCL2"),s=r.n(t);for(var n in t)"default"!==n&&function(e){r.d(a,e,(function(){return t[e]}))}(n);a.default=s.a}}]);