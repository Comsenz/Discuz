(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{"8nXa":function(t,e,a){"use strict";a.r(e);var s=a("zFIK"),n=a.n(s);for(var o in s)"default"!==o&&function(t){a.d(e,t,(function(){return s[t]}))}(o);e.default=n.a},TXAU:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wx-sign-up-bd-box"},[a("LoginHeader"),t._v(" "),a("main",{staticClass:"wx-sign-up-bd-main"},[t._m(0),t._v(" "),a("form",{staticClass:"wx-sign-up-bd-form",attrs:{action:""}},[a("van-cell-group",[a("van-field",{attrs:{clearable:"",label:"用户名",placeholder:"请输入您的用户名"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),t._v(" "),a("van-field",{attrs:{type:"password",label:"密码",placeholder:"请填写密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),a("div",{staticClass:"wx-sign-up-bd-btn"},[a("van-button",{attrs:{type:"primary"},on:{click:t.signUpBdClick}},[t._v("注册并绑定")])],1)]),t._v(" "),a("LoginFooter")],1)},n=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wx-sign-up-bd-title-box"},[e("h2",{staticClass:"wx-sign-up-bd-title-box-h2"},[this._v("微信绑定账号")]),this._v(" "),e("div",{staticClass:"wx-sign-up-main-desc"},[this._v("您的微信号未绑定账号，请注册并绑定您的账号")])])}];a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return n}))},nWjw:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r(a("JZuw")),n=r(a("UjaL")),o=r(a("VVfg"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{userName:"",password:"",phoneStatus:"",siteMode:"",openid:""}},components:{LoginHeader:s.default,LoginFooter:n.default},methods:{signUpBdClick:function(){var t=this;this.appFetch({url:"register",method:"post",data:{data:{type:"users",attributes:{username:this.userName,password:this.password,openid:this.openid}}}}).then((function(e){if(console.log(e),e.errors)e.errors[0].detail?t.$toast.fail(e.errors[0].code+"\n"+e.errors[0].detail[0]):t.$toast.fail(e.errors[0].code);else{t.$toast.success("注册成功");var a=e.data.attributes.access_token,s=e.data.id,n=e.data.attributes.refresh_token;o.default.setLItem("Authorization",a),o.default.setLItem("tokenId",s),o.default.setLItem("refreshToken",n),t.getForum().then((function(){t.phoneStatus?t.$router.push({path:"bind-phone"}):"pay"===t.siteMode?t.$router.push({path:"pay-the-fee"}):"public"===t.siteMode?t.$router.push({path:"/"}):console.log("缺少参数，请刷新页面")}))}})).catch((function(t){console.log(t)}))},getForum:function(){var t=this;return this.appFetch({url:"forum",method:"get",data:{}}).then((function(e){console.log(e),e.errors?t.$toast.fail(e.errors[0].code):(t.phoneStatus=e.readdata._data.qcloud.qcloud_sms,t.siteMode=e.readdata._data.setsite.site_mode)})).catch((function(t){console.log(t)}))}},created:function(){this.getForum(),this.openid=o.default.getLItem("openid")}}},oe1W:function(t,e,a){"use strict";a.r(e);var s=a("TXAU"),n=a("8nXa");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);var r=a("KHd+"),i=Object(r.a)(n.default,s.a,s.b,!1,null,null,null);e.default=i.exports},zFIK:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o(a("QbLZ"));a("i4TU");var n=o(a("nWjw"));function o(t){return t&&t.__esModule?t:{default:t}}e.default=(0,s.default)({name:"wx-sign-up-bd"},n.default)}}]);