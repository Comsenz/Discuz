(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{"0WH9":function(t,a,e){"use strict";e.r(a);var i=e("yIyI"),n=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(a,t,(function(){return i[t]}))}(o);a.default=n.a},"A3/U":function(t,a,e){"use strict";e.r(a);var i=e("pgNT"),n=e("0WH9");for(var o in n)"default"!==o&&function(t){e.d(a,t,(function(){return n[t]}))}(o);e("KcSo");var r=e("KHd+"),c=Object(r.a)(n.default,i.a,i.b,!1,null,"088ae1ae",null);a.default=c.exports},KcSo:function(t,a,e){"use strict";var i=e("jsMm");e.n(i).a},Kr3I:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=o(e("JZuw")),n=o(e("VVfg"));function o(t){return t&&t.__esModule?t:{default:t}}a.default={data:function(){return{headPortrait:"",modifyPhone:"",changePwd:"",bindType:"",wechatId:"",wechatNickname:"",tipWx:"",isWeixin:""}},components:{ModifyHeader:i.default},created:function(){this.modifyData(),this.wechat(),this.isWeixin=this.appCommonH.isWeixin().isWeixin,this.isWeixin?this.tipWx="确认解绑微信及退出登录":this.tipWx="确认解绑微信"},methods:{myModify:function(t){switch(t){case"modify-phone":this.$router.push("/modify-phone");break;case"change-pwd":this.$router.push("/change-pwd");break;case"bind-new-phone":this.$router.push("/bind-new-phone");break;default:this.$router.push("/")}},modifyData:function(){var t=this,a=n.default.getLItem("tokenId");this.appFetch({url:"users",method:"get",splice:"/"+a,data:{include:"wechat"}}).then((function(a){a.errors?t.$toast.fail(a.errors[0].code):(console.log(a),t.modifyPhone=a.readdata._data.mobile,t.headPortrait=a.readdata._data.avatarUrl,t.wechatId=a.readdata._data.id,a.readdata.wechat?(console.log(a.readdata.wechat,"999999"),t.wechatNickname=a.readdata.wechat._data.nickname):t.wechatNickname=!1)}))},handleFile:function(t){var a=this,e=t.target.files[0];console.log(e);var i=new FormData;i.append("avatar",e),console.log(i);var o=n.default.getLItem("tokenId");this.appFetch({url:"upload",method:"post",splice:o+"/avatar",data:i}).then((function(t){t.errors?a.$toast.fail(t.errors[0].code):(a.headPortrait=t.data.attributes.avatarUrl,a.modifyData())}))},myModifyWechat:function(){var t=this;this.$dialog.confirm({title:this.tipWx}).then((function(a){a.errors?t.$toast.fail(a.errors[0].code):(console.log("000000"),t.wechat(t.wechatId))}))},wechat:function(t){var a=this;""!=t&&null!=t&&this.appFetch({url:"wechatDelete",method:"delete",splice:this.wechatId+"/wechat",data:{}}).then((function(t){t.errors?a.$toast.fail(t.errors[0].code):a.appCommonH.isWeixin().isWeixin?(localStorage.clear(),a.$router.push({path:"/wx-login-bd"})):a.modifyData()}))},wechatBind:function(){var t=this;this.appFetch({url:"wechatBind",method:"get",data:{}}).then((function(a){a.errors?t.$toast.fail(a.errors[0].code):(console.log(a.readdata._data.location),window.location.href=a.readdata._data.location)}))}}}},jsMm:function(t,a,e){},llYx:function(t,a,e){},pgNT:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modify-data-box"},[e("ModifyHeader",{attrs:{title:"我的资料"}}),t._v(" "),e("main",{staticClass:"modify-data-main content"},[e("div",{staticClass:"modify-data-avatar m-site-cell-access"},[t._m(0),t._v(" "),e("div",{staticClass:"modify-data-avatar-img"},[e("input",{staticClass:"hiddenInput",attrs:{type:"file",accept:"image/*"},on:{change:t.handleFile}}),t._v(" "),t.headPortrait?e("img",{attrs:{src:t.headPortrait,alt:"我的头像"}}):e("img",{staticClass:"resUserHead",attrs:{src:t.appConfig.staticBaseUrl+"/images/noavatar.gif"}}),t._v(" "),t._m(1)])]),t._v(" "),t.modifyPhone?e("van-cell",{attrs:{title:"手机号","is-link":"",value:t.modifyPhone},on:{click:function(a){return t.myModify("modify-phone")}}}):e("van-cell",{attrs:{title:"手机号","is-link":"",value:"去绑定"},on:{click:function(a){return t.$router.push({path:"/bind-new-phone"})}}}),t._v(" "),e("van-cell",{attrs:{title:"密码","is-link":"",value:"********"},on:{click:function(a){return t.myModify("change-pwd")}}}),t._v(" "),t.wechatNickname?e("van-cell",{attrs:{title:"微信","is-link":"",value:t.wechatNickname},on:{click:t.myModifyWechat}}):e("van-cell",{attrs:{title:"微信","is-link":"",value:"去绑定"},on:{click:t.wechatBind}})],1)],1)},n=[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modify-data-avatar-title m-site-cell-access-bd"},[a("p",[this._v("头像")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("i",[a("span",{staticClass:"icon iconfont icon-right m-site-cell-access-ft-icon",staticStyle:{color:"#e5e5e5"}})])}];e.d(a,"a",(function(){return i})),e.d(a,"b",(function(){return n}))},yIyI:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=o(e("QbLZ"));e("llYx");var n=o(e("Kr3I"));function o(t){return t&&t.__esModule?t:{default:t}}a.default=(0,i.default)({name:"modify-data-view"},n.default)}}]);