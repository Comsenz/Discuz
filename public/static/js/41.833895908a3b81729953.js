(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"/K1J":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(a("bS4n"));a("iUmJ"),a("llYx");var i=r(a("XPxv"));function r(t){return t&&t.__esModule?t:{default:t}}e.default=(0,n.default)({name:"order-details-view"},i.default)},"6yS/":function(t,e,a){"use strict";a.r(e);var n=a("exgZ"),i=a("OVfA");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);var s=a("Yj/X"),o=Object(s.a)(i.default,n.a,n.b,!1,null,null,null);e.default=o.exports},"Ek/V":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(a("bS4n")),i=r(a("tNAK"));function r(t){return t&&t.__esModule?t:{default:t}}a("iUmJ"),e.default=(0,n.default)({name:"panel"},i.default)},H68H:function(t,e,a){"use strict";a.r(e);var n=a("aOFr"),i=a("VIDA");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);var s=a("Yj/X"),o=Object(s.a)(i.default,n.a,n.b,!1,null,null,null);e.default=o.exports},OVfA:function(t,e,a){"use strict";a.r(e);var n=a("/K1J"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e.default=i.a},VIDA:function(t,e,a){"use strict";a.r(e);var n=a("Ek/V"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e.default=i.a},XPxv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(a("JZuw")),i=s(a("H68H")),r=s(a("VVfg"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{orderList:[],type:{1:"加入圈子",2:"打赏帖子",3:"付费查看帖子"},status:{0:"待付款",1:"已付款"},pageIndex:1,pageLimit:20,loading:!1,finished:!1,offset:100,isLoading:!1,userId:"",concent:""}},components:{orderDetailsHeader:n.default,Panel:i.default},created:function(){this.userId=r.default.getLItem("tokenId"),this.order()},methods:{order:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.appFetch({url:"orderList",method:"get",data:{include:"thread.firstPost","filter[user]":this.userId,"page[number]":this.pageIndex,"page[limit]":this.pageLimit}}).then((function(a){if(a.errors)throw t.$toast.fail(a.errors[0].code),new Error(a.error);e&&(t.orderList=[]),a.readdata.map((function(e){switch(e._data.type){case 1:e.title=t.type[e._data.type];break;case 2:case 3:var a=e.thread?e.thread._data:null;e.title=t.type[e._data.type],e.title+=a?"<a href='details/"+a.id+"'>“"+a.title+"”</a>":"“该主题被删除”";break;default:e.title="unknown order type"}})),t.orderList=t.orderList.concat(a.readdata),t.loading=!1,t.finished=a.readdata.length<t.pageLimit})).catch((function(e){t.loading&&1!==t.pageIndex&&t.pageIndex--,t.loading=!1}))},jumpDetails:function(t){this.$router.push({path:"/details/"+t})},onLoad:function(){this.loading=!0,this.pageIndex++,this.order()},onRefresh:function(){var t=this;this.pageIndex=1,this.order(!0).then((function(e){t.$toast("刷新成功"),t.finished=!1,t.isLoading=!1})).catch((function(e){t.$toast("刷新失败"),t.isLoading=!1}))}}}},aOFr:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel-box",on:{click:t.boxClick}},[a("div",{staticClass:"panel-header"},[a("div",{staticClass:"panel-header-lf"},[a("span",{domProps:{innerHTML:t._s(t.titles)}})]),t._v(" "),a("div",{staticClass:"panel-header-rh"},[a("span",{class:t.status?"add-orange":""},[t._v("\n        "+t._s(t.nums)+"\n      ")])])]),t._v(" "),a("div",{staticClass:"panel-bottom",on:{click:t.labelClick}},[t._t("label")],2)])},i=[]},exgZ:function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("orderDetailsHeader",{attrs:{title:"订单明细"}}),t._v(" "),a("van-list",{attrs:{finished:t.finished,offset:t.offset,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[a("main",{staticClass:"content"},t._l(t.orderList,(function(e,n){return a("Panel",{key:n,attrs:{title:e.title,num:"-"+e._data.amount},on:{click:function(a){return t.jumpDetails(e.thread._data.id)}}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.status[e._data.status]))]),t._v(" "),a("span",{attrs:{slot:"label"},slot:"label"},[t._v("流水号 : "+t._s(e._data.order_sn))]),t._v(" "),a("span",{attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.$moment(e._data.created_at).format("YYYY-MM-DD HH:mm")))])])})),1)])],1),t._v(" "),a("footer",{staticClass:"my-info-money-footer"})],1)},i=[]},llYx:function(t,e,a){},tNAK:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{titles:this.title,nums:this.num}},props:{title:{default:"标题",type:String},num:{default:"0.00",type:String},type:{type:String},status:{default:!1,type:Boolean}},methods:{boxClick:function(){this.$emit("click")},labelClick:function(){this.$emit("labelClick")}},mounted:function(){}}}}]);