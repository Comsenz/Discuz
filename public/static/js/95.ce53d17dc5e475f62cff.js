(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{"4Vlt":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n("QbLZ")),s=a(n("Mro7"));function a(t){return t&&t.__esModule?t:{default:t}}n("I1+7"),e.default=(0,o.default)({name:"userReview"},s.default)},Mro7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(n("wd/R")),s=a(n("4gYi"));function a(t){return t&&t.__esModule?t:{default:t}}e.default={data:function(){return{tableData:[],multipleSelection:[]}},methods:{handleSelectionChange:function(t){this.multipleSelection=t},singleOperation:function(t,e){var n=this;console.log(t),console.log(e),"pass"===t?this.editUser(e,0):"no"===t?this.$MessageBox.prompt("","提示",{confirmButtonText:"提交",cancelButtonText:"取消",inputPlaceholder:"请输入否决原因"}).then((function(t){console.log(t),n.editUser(e,1,t.value)})).catch((function(t){console.log(t)})):"del"===t&&this.deleteUser(e)},allOperation:function(t){var e=this,n=[];"pass"===t?(this.multipleSelection.forEach((function(t){n.push({attributes:{id:t._data.id,status:"0"}})})),this.patchEditUser(n)):"no"===t?this.$MessageBox.prompt("","提示",{confirmButtonText:"提交",cancelButtonText:"取消",inputPlaceholder:"请输入否决原因"}).then((function(t){e.multipleSelection.forEach((function(e){n.push({attributes:{id:e._data.id,status:"1",refuse_message:t.value}})})),e.patchEditUser(n)})).catch((function(t){console.log(t)})):"del"===t&&(this.multipleSelection.forEach((function(t){n.push(t._data.id)})),this.patchDeleteUser(n)),console.log(n)},formatDate:function(t){return(0,o.default)(t).format("YYYY-MM-DD HH:mm")},getUserList:function(){var t=this;this.appFetch({url:"users",method:"get",data:{"filter[status]":"mod"}}).then((function(e){console.log(e),t.tableData=e.readdata}))},editUser:function(t,e,n){var o=this;this.appFetch({url:"users",method:"PATCH",splice:"/"+t,data:{data:{attributes:{status:e,refuse_message:n}}}}).then((function(t){t.errors?o.$message.error(t.errors[0].code):(o.$message({message:"操作成功",type:"success"}),o.getUserList())})).catch((function(t){console.log(t)}))},patchEditUser:function(t){var e=this;this.appFetch({method:"PATCH",url:"users",data:{data:t}}).then((function(t){console.log(t),t.errors?e.$message.error(t.errors[0].code):(e.$message({message:"操作成功",type:"success"}),e.getUserList())})).catch((function(t){console.log(t)}))},patchDeleteUser:function(t){var e=this;this.appFetch({url:"users",method:"delete",data:{data:{attributes:{id:t}}}}).then((function(t){t.errors?e.$message.error(t.errors[0].code):(e.$message({message:"操作成功",type:"success"}),e.getUserList())})).catch((function(t){console.log(t)}))},deleteUser:function(t){var e=this;this.appFetch({url:"users",method:"delete",splice:"/"+t,data:{}}).then((function(t){console.log(t),t.errors?e.$message.error(t.errors[0].code):(e.$message({message:"操作成功",type:"success"}),e.getUserList())})).catch((function(t){console.log(t)}))}},created:function(){this.getUserList()},components:{Card:s.default}}},ONLH:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-review-box"},[n("div",{staticClass:"user-review-table"},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{label:"编号",prop:"_data.id",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"_data.username",label:"用户名",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{prop:"_data.registerReason",label:"注册原因","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"注册时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.formatDate(e.row._data.createdAt)))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"",width:"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.singleOperation("pass",e.row._data.id)}}},[t._v("通过")]),t._v(" "),n("el-button",{attrs:{type:"text"},on:{click:function(n){return t.singleOperation("no",e.row._data.id)}}},[t._v("否决")]),t._v(" "),n("el-popover",{ref:"popover-"+e.$index,attrs:{width:"100",placement:"top"}},[n("p",[t._v("确定删除该项吗？")]),t._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"10PX 0 0 0"}},[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){e._self.$refs["popover-"+e.$index].doClose()}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){t.singleOperation("del",e.row._data.id),e._self.$refs["popover-"+e.$index].doClose()}}},[t._v("确定")])],1),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1),t._v(" "),n("Card",{staticClass:"footer-btn"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.allOperation("pass")}}},[t._v("通过")]),t._v(" "),n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.allOperation("no")}}},[t._v("否决")]),t._v(" "),n("el-button",{attrs:{size:"medium"},on:{click:function(e){return t.allOperation("del")}}},[t._v("删除")])],1)],1)},s=[];n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}))},esgl:function(t,e,n){"use strict";n.r(e);var o=n("4Vlt"),s=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e.default=s.a},jhKW:function(t,e,n){"use strict";n.r(e);var o=n("ONLH"),s=n("esgl");for(var a in s)"default"!==a&&function(t){n.d(e,t,(function(){return s[t]}))}(a);var r=n("KHd+"),l=Object(r.a)(s.default,o.a,o.b,!1,null,null,null);e.default=l.exports}}]);